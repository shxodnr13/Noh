import java.sql.Connection;
import java.sql.Statement;
import java.util.Vector;
import java.awt.Container;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.awt.event.WindowListener;
import java.sql.*;

import javax.swing.*;
import javax.swing.table.DefaultTableModel;
public class Main extends JFrame implements ActionListener{
	
	JLabel label, id, cate, item, unit, qty, check;
	JTextField fid, fcate, fitem, funit, fqty, fcheck, search;
	JButton add, delete, update, clear, all, subutton;
	String items[] = {"Cate", "Item", "Unit", "Qty", "Check"};
	JComboBox combo;
	JPanel bottompanel,leftpanel,center, pid,pname,pitem,punit,pqty, pcheck;
	
	JScrollPane sp;
	Vector outer,title,noresult,msg; //noresult: 검색결과 없을때 테이블 때문에
	JTable table;
	DefaultTableModel model;
	
	String connect = new String("jdbc:mysql://localhost:3306/tw1");
	String user = new String("root");
	String passwd = new String("!1234abcd");
	
	Connection conn;
	Statement stat;
	PreparedStatement pre1, pre2, pre3;
	ResultSet rs;
	
	public Main() {
		makeGui(); //화면구성
		//prepareDB(); //DB 준비작업
		//select(null); //첫화면에서 테이블의 모든 내용 보여주기 위해 Select하는 함수
		model.setDataVector(outer, title);
		
	}
	
	public void makeGui() {
		label = new JLabel("IT inventory", JLabel.CENTER);
		id = new JLabel("I D : " , JLabel.CENTER);
		
		fid = new JTextField(15);
		pid = new JPanel();
		pid.add(id);
		pid.add(fid);
		
		cate = new JLabel("Category : ");
		fcate = new JTextField(15);
		pname = new JPanel();
		pname.add(cate);
		pname.add(fcate);
	
		item = new JLabel("Item : ");
		fitem = new JTextField(15);
		pitem = new JPanel();
		pitem.add(item);		
		pitem.add(fitem);
		
		unit = new JLabel("Unit : " );
		funit = new JTextField(15);
		punit = new JPanel();
		punit.add(unit);
		punit.add(funit);
		
		qty = new JLabel("qty : ");
		fqty = new JTextField(15);
		pqty = new JPanel();
		pqty.add(qty);
		pqty.add(fqty);
		
		check = new JLabel("Check : ");
		fcheck = new JTextField(15);
		pcheck = new JPanel();
		pcheck.add(check);
		pcheck.add(fcheck);
		
		leftpanel = new JPanel();
		leftpanel.setLayout(new GridLayout(6, 1));
		leftpanel.add(pid);
		leftpanel.add(pname);
		leftpanel.add(pitem);
		leftpanel.add(punit);
		leftpanel.add(pqty);
		leftpanel.add(pcheck);
		
		add = new JButton("Add");
		add.addActionListener(this);
		delete = new JButton("Delete");
		delete.addActionListener(this);
		update = new JButton("Modify");
		update.addActionListener(this);
		
		combo = new JComboBox(items);
		
		search = new JTextField(15);
		search.addActionListener(this);
		
		subutton = new JButton("search");
		subutton.addActionListener(this);
		
		clear = new JButton("Clear");
		clear.addActionListener(this);
		
		all = new JButton("See All");
		all.addActionListener(this);
		
		bottompanel = new JPanel();
		bottompanel.add(add);
		bottompanel.add(delete);
		bottompanel.add(update);
		bottompanel.add(combo);
		bottompanel.add(search);
		bottompanel.add(subutton);
		bottompanel.add(clear);
		bottompanel.add(all);
		
		title = new Vector();
		outer = new Vector();
		noresult = new Vector();
		msg = new Vector();
		title = new Vector();
		
		title.add("Id");
		title.add("Category");
		title.add("Item");
		title.add("Unit");
		title.add("Qty");
		title.add("Check");
		
		noresult.add("Processing");
		
		addWindowListener(new WindowAdapter() {

			@Override
			public void windowClosing(WindowEvent w) {
				// TODO Auto-generated method stub
				try {
					rs.close();
					stat.close();
					conn.close();
					
					setVisible(false);
					dispose();
					System.exit(0);
					
				} catch (Exception e) {
					// TODO: handle exception
					e.printStackTrace();
				}
				super.windowClosing(w);
			}
			
			
		});
		
		Container c = getContentPane();
		
		//DefaultTableModel Create
		model = new DefaultTableModel();
		
		//Using model create JTable
		table = new JTable(model);
		
		table.addMouseListener(new MouseAdapter() {

			@Override
			public void mouseClicked(MouseEvent e) {
				// TODO Auto-generated method stub
				//To know index what you click.				
				int index = table.getSelectedRow();
				
				//Using index, out안의 작은 벡터 in 꺼내기
				Vector msg = (Vector)outer.get(index);
				
				//in안에 들어있는 번호, 이름, 주소 알아내서 텍스트 필드에 넣어주기
				String id = (String)msg.get(0);
				String cate = (String)msg.get(1);
				String item = (String)msg.get(2);
				String unit = (String)msg.get(3);
				String qty = (String)msg.get(4);
				String check = (String)msg.get(5);
				
				fid.setText(id);
				fcate.setText(cate);
				fitem.setText(item);
				funit.setText(unit);
				fqty.setText(qty);
				fcheck.setText(check);
				
				fid.setEditable(false);
				
				
				super.mouseClicked(e);
			}
			
		});
		sp = new JScrollPane(table);
		
		center = new JPanel();
		center.add(leftpanel);
		center.add(sp);
		
		c.add(label, "North");
		c.add(center, "Center");
		c.add(bottompanel, "South");
		
	}
	
	public void prepareDB(){
		
		Statement conn = null;
		PreparedStatement prestat1, prestat2, prestat3;
		try {
			
			Class.forName("com.mysql.jdbc.Driver");
			
			conn=DriverManagerConnection(connect, user, passwd);
			
			stat = conn.createStatement();
			
			prestat1 = conn.prepareStatement("insert into Inventory values(?,?,?,?,?,?)");
			prestat2 = 
			prestat3 =
		} catch (Exception e) {
			// TODO: handle exception
		}
		
		
		
		
	}

	@Override
	public void actionPerformed(ActionEvent arg0) {
		// TODO Auto-generated method stub
		
	}
}
